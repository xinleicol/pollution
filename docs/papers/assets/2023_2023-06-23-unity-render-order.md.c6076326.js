import{_ as A,o as V,c as q,O as K}from"./chunks/framework.c0a04da9.js";const e="/papers/assets/001.4bc2182a.png",w="data:image/png;base64,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",Q="/papers/assets/003.0906911a.png",C="/papers/assets/004.f469352a.png",g="/papers/assets/005.39bbd7f4.png",p=JSON.parse('{"title":"unity渲染顺序","description":"","frontmatter":{},"headers":[],"relativePath":"2023/2023-06-23-unity-render-order.md","filePath":"2023/2023-06-23-unity-render-order.md"}'),t={name:"2023/2023-06-23-unity-render-order.md"},O=K('<h1 id="unity渲染顺序" tabindex="-1">unity渲染顺序 <a class="header-anchor" href="#unity渲染顺序" aria-label="Permalink to &quot;unity渲染顺序&quot;">​</a></h1><p>这几天在项目中遇到了一个问题，关于渲染顺序的，花了点时间补充了一下unity中的渲染顺序知识</p><h2 id="问题描述" tabindex="-1">问题描述 <a class="header-anchor" href="#问题描述" aria-label="Permalink to &quot;问题描述&quot;">​</a></h2><p>同一个相机，相同渲染队列，相同深度下，奇怪的遮挡问题</p><h2 id="第一种情况" tabindex="-1">第一种情况 <a class="header-anchor" href="#第一种情况" aria-label="Permalink to &quot;第一种情况&quot;">​</a></h2><ul><li>一个四面体，Render Queue = 3000，depth = 0</li><li>第一条线段，Render Queue = 3000，depth = 0</li><li>第二条线段，Render Queue = 3000，depth = 0</li></ul><p><em>渲染队列3000为半透明队列，队列2500为不透明和透明渲染分割线，不透明物体由近到远渲染，透明队列由远到近渲染</em></p><p>渲染效果如下： <img src="'+e+'" alt="渲染结果1"><em>白色为四面体，绿色为第一条线段，红色为第二条</em></p><h2 id="第二种情况" tabindex="-1">第二种情况 <a class="header-anchor" href="#第二种情况" aria-label="Permalink to &quot;第二种情况&quot;">​</a></h2><ul><li>一个四面体，Render Queue = 3000，depth = 0</li><li>第一条线段，Render Queue = 3000，depth = -1</li><li>第二条线段，Render Queue = 3000，depth = -1</li></ul><p>渲染结果 <img src="'+w+'" alt="渲染结果2"></p><p>这不是我预期的结果，相同渲染队列下的，都为不透明物体，越靠近相机应该越晚渲染吧</p><p><strong>frame debugger</strong> 两条线段使用的是不同的shader，第一条是<code>Unlit/Color</code>，第二条是<code>UI/Default</code> debugger中看到<code>Color</code>开启了深度写入，而第二条没有： <img src="'+Q+'" alt="debugger"></p><p>这导致了，在四面体渲染的时候，会对第一条线条进行深度测试，第二条不会</p><h2 id="第三种情况" tabindex="-1">第三种情况 <a class="header-anchor" href="#第三种情况" aria-label="Permalink to &quot;第三种情况&quot;">​</a></h2><p>还有一个更好玩的现象： 把第二条线段的深度调整到 <code>-137</code>的时候，发现第二条线段又显示了 <img src="'+C+'" alt="渲染结果3"></p><p>然后发现绘制顺序发生了改变，第二条线段在最后绘制了</p><p>这也是我为什么疑惑的原因了</p><p><strong>最后检查发现：</strong><code>-137</code>只是相对父物体的深度，而由于父物体采用了 <code> Screen space Camera</code>的模式，导致scale会自动缩放，真实深度计算后应该比四面体的深度值要小，而且由于缩放尺寸太小，导致了浮点精度丢失问题？？</p><h2 id="摘录一张渲染顺序图" tabindex="-1">摘录一张渲染顺序图 <a class="header-anchor" href="#摘录一张渲染顺序图" aria-label="Permalink to &quot;摘录一张渲染顺序图&quot;">​</a></h2><p><img src="'+g+'" alt="渲染顺序图"></p><h1 id="参考资料" tabindex="-1">参考资料 <a class="header-anchor" href="#参考资料" aria-label="Permalink to &quot;参考资料&quot;">​</a></h1><p><a href="https://zhuanlan.zhihu.com/p/55762351" target="_blank" rel="noreferrer">Unity中影响渲染顺序的因素总结</a></p>',23),N=[O];function J(B,c,a,n,o,r){return V(),q("div",null,N)}const S=A(t,[["render",J]]);export{p as __pageData,S as default};
